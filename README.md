# ğŸ“ å°å­¦æˆç»©ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªç°ä»£åŒ–ã€æ™ºèƒ½åŒ–çš„å°å­¦æˆç»©ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨ Serverless å…¨æ ˆæ¶æ„ï¼Œéƒ¨ç½²åœ¨ Cloudflare å¹³å°ã€‚

[![éƒ¨ç½²çŠ¶æ€](https://github.com/Misaka450/bao-class/actions/workflows/deploy.yml/badge.svg)](https://github.com/Misaka450/bao-class/actions)
[![æŠ€æœ¯æ ˆ](https://img.shields.io/badge/Tech-React%2019%20%7C%20TypeScript%20%7C%20Cloudflare-blue)](https://github.com/Misaka450/bao-class)

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ“Š æˆç»©ç®¡ç†
- **æ‰¹é‡å¯¼å…¥** - æ”¯æŒ Excel æ–‡ä»¶æ‰¹é‡å¯¼å…¥æˆç»©æ•°æ®
- **å®æ—¶ç»Ÿè®¡** - è‡ªåŠ¨è®¡ç®—ç­çº§æ’åã€å¹³å‡åˆ†ã€åŠæ ¼ç‡ç­‰æŒ‡æ ‡
- **æ•°æ®å¯¼å‡º** - æ”¯æŒå¯¼å‡ºæˆç»©æŠ¥è¡¨å’Œåˆ†æç»“æœ

### ğŸ¤– AI æ™ºèƒ½åˆ†æ
- **æ™ºèƒ½è¯„è¯­ç”Ÿæˆ** - åŸºäº Cloudflare Workers AI è‡ªåŠ¨ç”Ÿæˆä¸ªæ€§åŒ–å­¦ç”Ÿè¯„è¯­
- **æˆç»©è¶‹åŠ¿åˆ†æ** - æ™ºèƒ½è¯†åˆ«å­¦ç”Ÿè¿›æ­¥æˆ–é€€æ­¥è¶‹åŠ¿
- **è–„å¼±ç¾¤ä½“è¯†åˆ«** - è‡ªåŠ¨æ ‡è®°éœ€è¦é‡ç‚¹å…³æ³¨çš„å­¦ç”Ÿ

### ğŸ“ˆ æ•°æ®å¯è§†åŒ–
- **ä»ªè¡¨ç›˜æ¦‚è§ˆ** - ç›´è§‚å±•ç¤ºå…³é”®æ•°æ®æŒ‡æ ‡
- **ç­çº§åˆ†æ** - å¤šç»´åº¦æˆç»©å¯¹æ¯”å’Œè¶‹åŠ¿åˆ†æ
- **å­¦ç”Ÿæ¡£æ¡ˆ** - ä¸ªäººæˆç»©å†å²ã€å­¦ç§‘é›·è¾¾å›¾
- **é‡ç‚¹å…³æ³¨** - ä¸´ç•Œç”Ÿã€æ³¢åŠ¨ç”Ÿã€é€€æ­¥ç”Ÿè‡ªåŠ¨ç­›é€‰

### ğŸ” ç³»ç»ŸåŠŸèƒ½
- **ç”¨æˆ·è®¤è¯** - åŸºäº JWT çš„å®‰å…¨è®¤è¯
- **æƒé™ç®¡ç†** - ç®¡ç†å‘˜ã€æ•™å¸ˆè§’è‰²æƒé™éš”ç¦»
- **æ“ä½œæ—¥å¿—** - å®Œæ•´çš„å®¡è®¡æ—¥å¿—è®°å½•
- **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯è®¿é—®

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 19** + **TypeScript** - ç°ä»£åŒ– UI æ¡†æ¶
- **Vite 6** - æé€Ÿæ„å»ºå·¥å…·
- **Ant Design v5** + **Ant Design Pro** - ä¼ä¸šçº§ UI ç»„ä»¶
- **Recharts** - æ•°æ®å¯è§†åŒ–å›¾è¡¨
- **React Query** - æœåŠ¡ç«¯çŠ¶æ€ç®¡ç†
- **Zustand** - å®¢æˆ·ç«¯çŠ¶æ€ç®¡ç†
- **React Router v7** - è·¯ç”±ç®¡ç†

### åç«¯
- **Hono.js** - è½»é‡çº§ Web æ¡†æ¶ï¼ˆè¿è¡Œåœ¨ Cloudflare Workersï¼‰
- **Cloudflare D1** - Serverless SQLite æ•°æ®åº“
- **Cloudflare Workers AI** - è¾¹ç¼˜è®¡ç®— AI æ¨ç†
- **JWT** - èº«ä»½è®¤è¯
- **XLSX** - Excel æ–‡ä»¶å¤„ç†

### åŸºç¡€è®¾æ–½
- **Cloudflare Workers** - è¾¹ç¼˜è®¡ç®—å¹³å°ï¼ˆåç«¯ APIï¼‰
- **Cloudflare Pages** - é™æ€ç½‘ç«™æ‰˜ç®¡ï¼ˆå‰ç«¯ï¼‰
- **GitHub Actions** - CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²

### å¼€å‘å·¥å…·
- **npm workspaces** - Monorepo é¡¹ç›®ç®¡ç†
- **TypeScript** - ç±»å‹å®‰å…¨
- **ESLint** + **Prettier** - ä»£ç è´¨é‡

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
bao-class/                      # Monorepo æ ¹ç›®å½•
â”œâ”€â”€ api/                        # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts           # Workers å…¥å£
â”‚   â”‚   â”œâ”€â”€ routes/            # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts        # è®¤è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ scores.ts      # æˆç»©ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ analysis.ts    # æ•°æ®åˆ†æ
â”‚   â”‚   â”‚   â””â”€â”€ ai.ts          # AI åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ db/               # æ•°æ®åº“
â”‚   â”‚       â”œâ”€â”€ schema.sql     # è¡¨ç»“æ„
â”‚   â”‚       â””â”€â”€ test-data-v4.sql # æµ‹è¯•æ•°æ®
â”‚   â””â”€â”€ wrangler.toml          # Cloudflare é…ç½®
â”‚
â”œâ”€â”€ frontend/                   # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx  # ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â”œâ”€â”€ ScoresList.tsx # æˆç»©åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ClassAnalysis.tsx # ç­çº§åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ StudentProfile.tsx # å­¦ç”Ÿæ¡£æ¡ˆ
â”‚   â”‚   â”‚   â””â”€â”€ ManagementAlerts.tsx # é‡ç‚¹å…³æ³¨
â”‚   â”‚   â”œâ”€â”€ components/        # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/          # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ store/             # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ types/             # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ vite.config.ts         # Vite é…ç½®
â”‚
â”œâ”€â”€ packages/                   # å…±äº«åŒ…
â”‚   â””â”€â”€ types/                 # å…±äº«ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ scripts/                    # å¼€å‘è„šæœ¬
â”‚   â””â”€â”€ fix_ai_response_v5.js  # AI è°ƒè¯•å·¥å…·
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ deploy.yml         # è‡ªåŠ¨éƒ¨ç½²é…ç½®
â”‚
â””â”€â”€ package.json               # Monorepo é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** 20.x æˆ–æ›´é«˜
- **npm** 10.x æˆ–æ›´é«˜
- **Cloudflare è´¦æˆ·**ï¼ˆç”¨äºéƒ¨ç½²ï¼‰

### æœ¬åœ°å¼€å‘

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/Misaka450/bao-class.git
cd bao-class
```

#### 2. å®‰è£…ä¾èµ–

ç”±äºé¡¹ç›®ä½¿ç”¨ npm workspacesï¼Œåœ¨æ ¹ç›®å½•ç»Ÿä¸€å®‰è£…ï¼š

```bash
npm install
```

#### 3. å¯åŠ¨åç«¯

```bash
cd api
npm run dev
```

åç«¯å°†è¿è¡Œåœ¨ `http://localhost:8787`

#### 4. å¯åŠ¨å‰ç«¯

åœ¨æ–°ç»ˆç«¯çª—å£ï¼š

```bash
cd frontend
npm run dev
```

å‰ç«¯å°†è¿è¡Œåœ¨ `http://localhost:3000`

#### 5. åˆå§‹åŒ–æ•°æ®åº“

è®¿é—®ä»¥ä¸‹ URL åˆå§‹åŒ–æ•°æ®åº“å’Œæµ‹è¯•æ•°æ®ï¼š

```
http://localhost:8787/api/init/all
```

#### 6. ç™»å½•ç³»ç»Ÿ

**é»˜è®¤ç®¡ç†å‘˜è´¦å·**ï¼š
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`baobao123`

## ğŸ“š æ ¸å¿ƒåŠŸèƒ½ä½¿ç”¨

### æˆç»©å¯¼å…¥

1. è¿›å…¥ã€Œæ•°æ®å¯¼å…¥ã€é¡µé¢
2. ä¸‹è½½ Excel æ¨¡æ¿
3. æŒ‰æ¨¡æ¿æ ¼å¼å¡«å†™æˆç»©æ•°æ®
4. ä¸Šä¼ æ–‡ä»¶å®Œæˆå¯¼å…¥

### AI è¯„è¯­ç”Ÿæˆ

1. è¿›å…¥ã€Œå­¦ç”Ÿæ¡£æ¡ˆã€é¡µé¢
2. é€‰æ‹©å­¦ç”ŸæŸ¥çœ‹è¯¦æƒ…
3. ç‚¹å‡»ã€Œç”Ÿæˆ AI è¯„è¯­ã€æŒ‰é’®
4. ç³»ç»Ÿè‡ªåŠ¨åˆ†æå­¦ç”Ÿæˆç»©å¹¶ç”Ÿæˆä¸ªæ€§åŒ–è¯„è¯­

### é‡ç‚¹å…³æ³¨åå•

ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«ä»¥ä¸‹ç±»å‹å­¦ç”Ÿï¼š

- **ä¸´ç•Œç”Ÿ**ï¼šè·ç¦»åŠæ ¼çº¿æˆ–ä¼˜ç§€çº¿ä»…å·® 1-5 åˆ†
- **é€€æ­¥ç”Ÿ**ï¼šè¿ç»­è€ƒè¯•æˆç»©æ˜¾è‘—ä¸‹é™
- **æ³¢åŠ¨ç”Ÿ**ï¼šæˆç»©èµ·ä¼è¾ƒå¤§ï¼Œä¸ç¨³å®š
- **åç§‘ç”Ÿ**ï¼šå­¦ç§‘æˆç»©å·®å¼‚è¿‡å¤§

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

```bash
# æ ¼å¼åŒ–ä»£ç 
npm run format

# ä»£ç æ£€æŸ¥
npm run lint
```

### ç±»å‹æ£€æŸ¥

```bash
# å‰ç«¯ç±»å‹æ£€æŸ¥
cd frontend
npx tsc -p tsconfig.app.json --noEmit

# åç«¯ç±»å‹æ£€æŸ¥
cd api
npx tsc --noEmit
```

### æ„å»ºé¡¹ç›®

```bash
# æ„å»ºå‰ç«¯
cd frontend
npm run build

# æ„å»ºåç«¯
cd api
npm run build
```

## ğŸš€ éƒ¨ç½²

### è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

é¡¹ç›®é…ç½®äº† GitHub Actionsï¼Œæ¨é€åˆ° `master` åˆ†æ”¯ä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚

#### é…ç½®æ­¥éª¤

1. **åœ¨ Cloudflare åˆ›å»º API Token**

   è®¿é—® [Cloudflare API Tokens](https://dash.cloudflare.com/profile/api-tokens)ï¼Œåˆ›å»ºå…·æœ‰ä»¥ä¸‹æƒé™çš„ Tokenï¼š
   - Workers Scripts: Edit
   - Cloudflare Pages: Edit
   - D1: Edit

2. **é…ç½® GitHub Secrets**

   åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹ Secretsï¼š
   - `CLOUDFLARE_API_TOKEN` - ä¸Šä¸€æ­¥åˆ›å»ºçš„ API Token
   - `CLOUDFLARE_ACCOUNT_ID` - Cloudflare è´¦æˆ· ID

3. **æ¨é€ä»£ç è§¦å‘éƒ¨ç½²**

   ```bash
   git push origin master
   ```

4. **æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€**

   åœ¨ GitHub Actions é¡µé¢æŸ¥çœ‹éƒ¨ç½²è¿›åº¦å’Œæ—¥å¿—

### æ‰‹åŠ¨éƒ¨ç½²

#### éƒ¨ç½²åç«¯

```bash
cd api
npx wrangler deploy
```

#### éƒ¨ç½²å‰ç«¯

```bash
cd frontend
npm run build
npx wrangler pages deploy dist --project-name=bao-class
```

## ğŸ“– API æ–‡æ¡£

### è®¤è¯ç›¸å…³

- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/auth/profile` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### æˆç»©ç®¡ç†

- `GET /api/scores` - è·å–æˆç»©åˆ—è¡¨
- `POST /api/scores` - æ·»åŠ æˆç»©
- `PUT /api/scores/:id` - æ›´æ–°æˆç»©
- `DELETE /api/scores/:id` - åˆ é™¤æˆç»©

### æ•°æ®åˆ†æ

- `GET /api/analysis/class/:classId` - ç­çº§åˆ†æ
- `GET /api/analysis/student/:studentId` - å­¦ç”Ÿåˆ†æ
- `GET /api/analysis/focus/:classId` - é‡ç‚¹å…³æ³¨åå•

### AI åŠŸèƒ½

- `POST /api/ai/generate-comment` - ç”Ÿæˆå­¦ç”Ÿè¯„è¯­
- `GET /api/ai/comment-history/:studentId` - è¯„è¯­å†å²

è¯¦ç»† API æ–‡æ¡£è¯·å‚è€ƒ [API_DOCS.md](./API_DOCS.md)

## ğŸ”’ å®‰å…¨è¯´æ˜

- æ‰€æœ‰ API è¯·æ±‚éœ€è¦æºå¸¦ JWT Token
- å¯†ç ä½¿ç”¨ bcrypt åŠ å¯†å­˜å‚¨
- ç”Ÿäº§ç¯å¢ƒè¯·ä¿®æ”¹é»˜è®¤å¯†ç å’Œ JWT_SECRET
- å»ºè®®å¯ç”¨ HTTPS è®¿é—®

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œå‰ç«¯æµ‹è¯•
cd frontend
npm test

# è¿è¡Œåç«¯æµ‹è¯•ï¼ˆå¦‚æœ‰ï¼‰
cd api
npm test
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-12)
- âœ… å®Œæ•´çš„æˆç»©ç®¡ç†åŠŸèƒ½
- âœ… AI æ™ºèƒ½è¯„è¯­ç”Ÿæˆ
- âœ… æ•°æ®åˆ†æå’Œå¯è§†åŒ–
- âœ… é‡ç‚¹å…³æ³¨åå•
- âœ… è‡ªåŠ¨åŒ– CI/CD éƒ¨ç½²
- âœ… React 19 + TypeScript å‡çº§
- âœ… Monorepo æ¶æ„é‡æ„

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [Cloudflare](https://www.cloudflare.com/) - æä¾›å¼ºå¤§çš„è¾¹ç¼˜è®¡ç®—å¹³å°
- [Ant Design](https://ant.design/) - ä¼˜ç§€çš„ React UI ç»„ä»¶åº“
- [Hono.js](https://hono.dev/) - è½»é‡çº§ Web æ¡†æ¶

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µï¼š[https://github.com/Misaka450/bao-class](https://github.com/Misaka450/bao-class)
- Issue åé¦ˆï¼š[GitHub Issues](https://github.com/Misaka450/bao-class/issues)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ Star æ”¯æŒï¼
